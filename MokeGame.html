<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>MokeSell</title>
    <link rel="icon" href="Images/favicon.png" type="image/x-icon">

</head>

<link rel="stylesheet" href="style.css">
<body>
    <header class="topbar">
        <nav class="navbar">
            <!-- Logo on the right -->
            <div class="logo">
                <a href="index.html">
                    <img src="Images/MokeSell_logo.png" alt="Logo">
                </a>
            </div> 

            <div class="nav-links">
                <div class="categories-btn">
                    <button class="categories-toggle-btn" onclick="toggleMenu()">
                        <span class="hamburger">&#9776;</span> Categories
                    </button>
                    <div id="dropdownMenu" class="dropdown-menu">
                        <a href="#">
                            <img src="Images/free.png" alt="Free Items" class="dropdown-img">
                            Free Items
                        </a>
                        <a href="#">
                            <img src="Images/women_fashion.png" alt="Women's Fashion" class="dropdown-img">
                            Women's Fashion
                        </a>
                        <a href="#">
                            <img src="Images/men_fashion.png" alt="Men's Fashion" class="dropdown-img">
                            Men's Fashion
                        </a>
                        <a href="#">
                            <img src="Images/cosmetics.png" alt="Beauty & Health" class="dropdown-img">
                            Beauty & Health
                        </a>
                        <a href="#">
                            <img src="Images/gadgets.png" alt="Electronics" class="dropdown-img">
                            Electronics
                        </a>
                        <a href="#">
                            <img src="Images/baby.png" alt="Babies & Kids" class="dropdown-img">
                            Babies & Kids
                        </a>
                        <a href="#">
                            <img src="Images/learning.png" alt="Learning & Enrichment" class="dropdown-img">
                            Learning & Enrichment
                        </a>
                        <a href="#">
                            <img src="Images/services.png" alt="Services" class="dropdown-img">
                            Services
                        </a>
                        <a href="#">
                            <img src="Images/application.png" alt="Others" class="dropdown-img">
                            Others
                        </a>
                    </div>
                </div>

                <div class="icons">
                    <a href="following.html">
                        <img src="Images/add-friend.png" alt="Favourites">
                    </a>
                    <a href="favourites.html">
                        <img src="Images/favourites.png" alt="Favourites">
                    </a>
                    <button onclick="showNotification()" style="border: 0; background-color: white;"><img src="Images/notification.png"></button>

                    <!-- ðŸ”¹ Slide-Out Notification -->
                    <div id="notificationBar">
                        <span class="close-button" onclick="hideNotification()"><img src="Images/close.png"></span>
                        <p><strong>Notification</strong></p>
                    </div>
                    <a href="chats.html">
                        <img src="Images/messages.png" alt="Chats">
                    </a>
                    <a href="#">
                        <img src="Images/game.png" alt="MokeFarm" style="width:40px;height:40px;">
                    </a>
                </div>
                

                <div class="auth-buttons">
                    <button id="openModalBtn" class="login-btn">Login</button>
                    <button class="sell-btn">Sell</button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Login Modal (popup) -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <!-- Close Button -->
            <span class="close-btn" id="closeModalBtn">&times;</span>
            
            <!-- Title -->
            <h2>Login</h2>
            
            <!-- Form -->
            <form>
                <!-- Email Address -->
                <label for="email">Email Address:</label>
                <input type="email" id="email" name="email" placeholder="Enter your email" required>
                
                <!-- Password -->
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" placeholder="Enter your password" required>
                <a href="#" class="forgot-password">Forgot Password?</a>
                
                <!-- Sign In Button -->
                <button type="submit" class="btn">Sign In</button>
            </form>
            
            <!-- Divider -->
            <div class="divider">
                <span>OR</span>
            </div>
            
            <!-- Google Sign In -->
            <button class="google-btn">
                <img src="Images/google.png" alt="Google Icon">
                Sign In with Google
            </button>
            
            <!-- Create Account -->
            <p class="create-account">
                Don't have an account yet? <a href="#" id="createAccountLink" class="create-account-link">Create Account</a>
            </p>        
        </div>
    </div>

    <!-- Register Modal (popup) -->
    <div id="registerModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="closeRegisterModalBtn">&times;</span>
            <h2>Register</h2>
            <form id="add-contact-form">
                <label for="username">Username</label>
                <input type="text" id="username" name="username" placeholder="Enter your username" required>
                
                <label for="register-email">Email Address</label>
                <input type="email" id="email" name="email" placeholder="Enter your email" required>
                
                <label for="register-password">Password</label>
                <input type="password" id="password" name="password" placeholder="Enter your password" required>
                
                <label for="confirm-password">Confirm Password</label>
                <input type="password" id="confirm-password" name="confirm-password" placeholder="Confirm your password" required>
            
                <button type="submit" id="contact-submit" class="btn">Sign Up</button>
            </form>

            <div class="divider">
                <span>OR</span>
            </div>

            <button class="google-btn">
                <img src="Images/google.png" alt="Google Icon">
                Sign Up with Google
            </button>
            
            <p class="login-account">
                Already have an account? <a href="#" id="loginAccountLink" class="login-account-link">Login Account</a>
            </p>     
        </div>
    </div>   
    <div class="containers" style="height: 100vh;font-family: Arial, sans-serif;display: flex;flex-direction: column;align-items: center;justify-content: center;padding-top: 100px;">
        
        <h1>2048 Game</h1>
        <div class="scoreboard">
            <div>Score: <span id="score">0</span></div>
            <div>Best: <span id="best-score">0</span></div>
        </div>
        <div class="board" id="board"></div>
        <p>Use arrow keys to play.</p>
        <button id="try-again" onclick="restartGame()" style="display:none; padding: 10px 20px; font-size: 16px; background: #f65e3b; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px;">
            Try Again
        </button>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const boardElement = document.getElementById("board");
            const scoreElement = document.getElementById("score");
            const bestScoreElement = document.getElementById("best-score");
            let board = Array(4).fill().map(() => Array(4).fill(0));
            let tileElements = {};
            let score = 0;
            let bestScore = localStorage.getItem("bestScore") || 0;
            bestScoreElement.textContent = bestScore;
            // Tile colors based on number
            const tileColors = {
                2: "#eee4da",
                4: "#ede0c8",
                8: "#f2b179",
                16: "#f59563",
                32: "#f67c5f",
                64: "#f65e3b",
                128: "#edcf72",
                256: "#FFE600",
                512: "#edc850",
                1024: "#edc53f",
                2048: "#edc22e",
            };
            function updateScore(points) {
                score += points;
                scoreElement.textContent = score;
                if (score > bestScore) {
                    bestScore = score;
                    bestScoreElement.textContent = bestScore;
                    localStorage.setItem("bestScore", bestScore);
                }
            }
            function drawBoard() {
                Object.values(tileElements).forEach(tile => tile.remove());
                tileElements = {};
                board.forEach((row, r) => {
                    row.forEach((value, c) => {
                        if (value !== 0) {
                            let tile = document.createElement("div");
                            tile.classList.add("tile");
                            tile.textContent = value;
                            tile.style.transform = `translate(${c * 110}px, ${r * 110}px)`;
                            tile.style.backgroundColor = tileColors[value] || "#ccc"; // Set color based on value
                            boardElement.appendChild(tile);
                            tileElements[`${r}-${c}`] = tile;
                        }
                    });
                });
            }
            function updateTilePositions() {
                Object.entries(tileElements).forEach(([key, tile]) => {
                    const [r, c] = key.split('-').map(Number);
                    tile.style.transform = `translate(${c * 110}px, ${r * 110}px)`;
                });
            }
            function addRandomTile() {
                let emptyCells = [];
                for (let r = 0; r < 4; r++) {
                    for (let c = 0; c < 4; c++) {
                        if (board[r][c] === 0) emptyCells.push({ r, c });
                    }
                }
                if (emptyCells.length > 0) {
                    let { r, c } = emptyCells[Math.floor(Math.random() * emptyCells.length)];
                    board[r][c] = Math.random() < 0.9 ? 2 : 4;
                }
            }
            function slide(row) {
                let newRow = row.filter(val => val);
                for (let i = 0; i < newRow.length - 1; i++) {
                    if (newRow[i] === newRow[i + 1]) {
                        newRow[i] *= 2;
                        updateScore(newRow[i]);
                        newRow[i + 1] = 0;
                    }
                }
                newRow = newRow.filter(val => val);
                while (newRow.length < 4) newRow.push(0);
                return newRow;
            }
            function reverse(row) {
                return row.reverse();
            }
            function rotateBoardClockwise() {
                let newBoard = Array(4).fill().map(() => Array(4).fill(0));
                for (let r = 0; r < 4; r++) {
                    for (let c = 0; c < 4; c++) {
                        newBoard[c][3 - r] = board[r][c];
                    }
                }
                return newBoard;
            }
            function rotateBoardCounterClockwise() {
                let newBoard = Array(4).fill().map(() => Array(4).fill(0));
                for (let r = 0; r < 4; r++) {
                    for (let c = 0; c < 4; c++) {
                        newBoard[3 - c][r] = board[r][c];
                    }
                }
                return newBoard;
            }
            function moveBoard(direction) {
                let moved = false;
                if (direction === "ArrowUp") {
                    board = rotateBoardCounterClockwise();
                } else if (direction === "ArrowDown") {
                    board = rotateBoardClockwise();
                } else if (direction === "ArrowRight") {
                    board = board.map(reverse);
                }
               
                for (let i = 0; i < 4; i++) {
                    let newRow = slide(board[i]);
                    if (newRow.toString() !== board[i].toString()) moved = true;
                    board[i] = newRow;
                }
               
                if (direction === "ArrowUp") {
                    board = rotateBoardClockwise();
                } else if (direction === "ArrowDown") {
                    board = rotateBoardCounterClockwise();
                } else if (direction === "ArrowRight") {
                    board = board.map(reverse);
                }
               
                if (moved) {
                    addRandomTile();
                    updateTilePositions();
                    setTimeout(drawBoard, 150);
                }
            }
            document.addEventListener("keydown", (event) => {
                if (["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"].includes(event.key)) {
                    moveBoard(event.key);
                }
            });
            addRandomTile();
            addRandomTile();
            drawBoard();
        });
    </script>

    <script src="script.js"></script>

</body>
</html>
